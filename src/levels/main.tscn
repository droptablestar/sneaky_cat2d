[gd_scene format=3]

; External dependencies
[ext_resource type="PackedScene" path="res://src/player/Player.tscn" id="1_player"]
[ext_resource type="PackedScene" path="res://src/levels/RoomVisuals.tscn" id="2_room_visuals"]
[ext_resource type="Script" path="res://src/levels/camera_follow.gd" id="3_camera_follow"]
[ext_resource type="PackedScene" path="res://src/furniture/HideTable.tscn" id="4_hide_table"]

; Physics resource for the floor collision (continuous across both rooms)
[sub_resource type="RectangleShape2D" id="RectangleShape2D_1"]
size = Vector2(2600, 40)

[node name="Main" type="Node2D"]
y_sort_enabled = true


; === Room visuals via reusable scene ===
[node name="RoomA" parent="." instance=ExtResource("2_room_visuals")]
position = Vector2(0, 0)
wall_color = Color(0.22, 0.22, 0.22, 1.0)
floor_color = Color(0.30, 0.25, 0.20, 1.0)
[node name="RoomB" parent="." instance=ExtResource("2_room_visuals")]
position = Vector2(1280, 0)
wall_color = Color(0.20, 0.21, 0.23, 1.0)
floor_color = Color(0.28, 0.24, 0.19, 1.0)

; === Room boundary marker (visual seam) ===
[node name="RoomSeam" type="Line2D" parent="."]
z_index = -1
width = 2.0
default_color = Color(0.10, 0.10, 0.10, 1.0)
points = PackedVector2Array(640, 0, 640, 720)

; === Divider wall with doorway gap (visual only) ===
[node name="DividerWallTop" type="Polygon2D" parent="."]
z_index = -2
color = Color(0.14, 0.14, 0.14, 1.0)
polygon = PackedVector2Array(630, 0, 650, 0, 650, 280, 630, 280)

[node name="DividerWallBottom" type="Polygon2D" parent="."]
z_index = -2
color = Color(0.14, 0.14, 0.14, 1.0)
polygon = PackedVector2Array(630, 440, 650, 440, 650, 720, 630, 720)

; === Physics floor ===
[node name="Floor" type="StaticBody2D" parent="."]
position = Vector2(640, 400)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Floor"]
shape = SubResource("RectangleShape2D_1")

; Furniture
[node name="HideTable" parent="." instance=ExtResource("4_hide_table")]
position = Vector2(400, 355)

; Player
[node name="Player" parent="." instance=ExtResource("1_player")]
position = Vector2(200, 300)

; Camera (follows player X)
[node name="Camera2D" type="Camera2D" parent="."]
current = true
position = Vector2(0, 360)
script = ExtResource("3_camera_follow")
target_path = NodePath("../Player")
fixed_y = 360.0
